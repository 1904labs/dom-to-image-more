{"version":3,"file":"dom-to-image-more.min.js","sources":["../src/dom-to-image-more.js"],"names":["global","util","let","uid_index","escape","string","replace","isDataUrl","url","search","canvasToBlob","canvas","toBlob","Promise","resolve","binaryString","atob","toDataURL","split","length","binaryArray","Uint8Array","i","charCodeAt","Blob","type","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","a","head","appendChild","body","href","getAndEncode","cacheEntry","domtoimage","impl","urlCache","find","el","promise","push","options","cacheBust","test","Date","getTime","httpTimeout","request","XMLHttpRequest","onreadystatechange","readyState","status","placeholder","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","useCredentials","withCredentials","open","send","message","console","error","imagePlaceholder","uid","Math","random","pow","toString","slice","delay","ms","arg","setTimeout","asArray","arrayLike","array","escapeXhtml","makeImage","uri","reject","image","Image","crossOrigin","onload","onerror","src","width","node","px","leftBorder","rightBorder","isNaN","scrollWidth","height","topBorder","bottomBorder","scrollHeight","getWindow","isElement","isElementHostForOpenShadowRoot","value","shadowRoot","isShadowRoot","isInShadowRoot","isHTMLElement","HTMLElement","isHTMLCanvasElement","HTMLCanvasElement","isHTMLInputElement","HTMLInputElement","isHTMLImageElement","HTMLImageElement","isHTMLLinkElement","HTMLLinkElement","isHTMLScriptElement","HTMLScriptElement","isHTMLStyleElement","HTMLStyleElement","isHTMLTextAreaElement","HTMLTextAreaElement","isShadowSlotElement","HTMLSlotElement","isSVGElement","SVGElement","isSVGRectElement","SVGRectElement","ownerDocument","undefined","defaultView","window","ShadowRoot","Object","prototype","hasOwnProperty","call","getRootNode","Element","styleProperty","getComputedStyle","getPropertyValue","NaN","parseFloat","inliner","URL_REGEX","inlineAll","get","shouldProcess","then","readUrls","urls","done","forEach","prefix","inline","match","exec","filter","urlValue","dataUrl","RegExp","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","getPrototypeOf","bind","e","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","images","inlineCSSProperty","newImage","childNodes","child","properties","inliningTasks","propertyName","priority","getPropertyPriority","inlinedValue","setProperty","element","defaultOptions","styleCaching","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","data","toCanvas","exports","module","ownerWindow","copyOptions","clonee","cloneNode","parentComputedStyles","sandbox","makeNodeCopy","clone","cloneChildren","getParentOfChildren","processClone","original","originalChildren","getRenderedChildren","originalComputedStyles","getRenderedParent","originalChild","clonedChild","host","assignedNodes","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyFont","source","target","font","fontFamily","fontFeatureSettings","fontKerning","fontSize","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariationSettings","fontWeight","copyStyle","sourceElement","targetElement","sourceComputedStyles","copyUserComputedStyleFast","removeProperty","prop","cloneClassName","clonePseudoElement","content","currentClass","getAttribute","styleElement","setAttribute","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","styleText","formatProperty","name","propertyValue","propertyPriority","innerHTML","attribute","embedFonts","inlineImages","bgcolor","backgroundColor","keys","property","onCloneResult","onclone","svg","XMLSerializer","serializeToString","xhtml","foreignObject","removeChild","removeDefaultStylesTimeoutId","clearTimeout","tagNameDefaultStyles","domNode","scale","ctx","fillStyle","fillRect","mozImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","drawImage","styleNode","defaultStyle","tagHierarchy","sourceNode","ELEMENT_NODE","Node","tagNames","nodeType","tagName","ascentStoppers","includes","parentNode","tagKey","_","sandboxWindow","contentWindow","charsetToUse","characterSet","docType","doctype","docTypeDeclaration","escapeHTML","publicId","systemId","trim","id","visibility","position","charset","title","write","metaCharset","sandboxDocument","sandboxHTML","documentElement","outerHTML","contentDocument","unsafeText","div","innerText","defaultElement","childTagName","pop","childElement","textContent","defaultComputedStyle","parentElement","targetStyle","needs_prefixing","sourceValue","defaultValue","parentValue","indexOf","this"],"mappings":"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"}
