{"version":3,"file":"dom-to-image-more.min.js","sources":["../src/dom-to-image-more.js"],"names":["global","util","let","uid_index","escape","string","replace","isDataUrl","url","search","canvasToBlob","canvas","toBlob","Promise","resolve","binaryString","atob","toDataURL","split","length","binaryArray","Uint8Array","i","charCodeAt","Blob","type","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","a","head","appendChild","body","href","getAndEncode","cacheEntry","domtoimage","impl","urlCache","find","el","promise","push","options","cacheBust","test","Date","getTime","httpTimeout","request","XMLHttpRequest","onreadystatechange","readyState","status","placeholder","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","useCredentials","withCredentials","open","send","message","console","error","imagePlaceholder","uid","Math","random","pow","toString","slice","delay","ms","arg","setTimeout","asArray","arrayLike","array","escapeXhtml","makeImage","uri","reject","image","Image","crossOrigin","onload","onerror","src","width","node","px","leftBorder","rightBorder","isNaN","scrollWidth","height","topBorder","bottomBorder","scrollHeight","getWindow","isElement","value","Element","isHTMLElement","HTMLElement","isHTMLCanvasElement","HTMLCanvasElement","isHTMLInputElement","HTMLInputElement","isHTMLImageElement","HTMLImageElement","isHTMLTextAreaElement","HTMLTextAreaElement","isSVGElement","SVGElement","isSVGRectElement","SVGRectElement","ownerDocument","undefined","defaultView","window","styleProperty","getComputedStyle","getPropertyValue","NaN","parseFloat","inliner","URL_REGEX","inlineAll","get","shouldProcess","then","readUrls","urls","done","forEach","prefix","inline","match","exec","filter","urlValue","dataUrl","RegExp","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","Object","prototype","hasOwnProperty","call","getPrototypeOf","bind","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","images","inlineCSSProperty","newImage","childNodes","child","properties","inliningTasks","propertyName","priority","getPropertyPriority","inlinedValue","setProperty","element","defaultOptions","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","data","toCanvas","exports","module","ownerWindow","copyOptions","clonee","cloneNode","parentComputedStyles","sandbox","makeNodeCopy","clone","cloneChildren","processClone","original","originalChildren","originalComputedStyles","originalChild","clonedChild","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyFont","source","target","font","fontFamily","fontFeatureSettings","fontKerning","fontSize","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariationSettings","fontWeight","copyStyle","sourceElement","targetElement","sourceComputedStyles","copyUserComputedStyleFast","removeProperty","prop","cloneClassName","clonePseudoElement","content","currentClass","getAttribute","styleElement","setAttribute","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","styleText","formatProperty","name","propertyValue","propertyPriority","innerHTML","attribute","embedFonts","inlineImages","bgcolor","backgroundColor","keys","property","onCloneResult","onclone","svg","XMLSerializer","serializeToString","xhtml","foreignObject","domNode","scale","ctx","fillStyle","fillRect","mozImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","drawImage","removeChild","removeDefaultStylesTimeoutId","clearTimeout","tagNameDefaultStyles","styleNode","defaultStyle","tagName","charset","visibility","position","characterSet","contentDocument","title","sandboxWindow","contentWindow","sandboxDocument","defaultElement","defaultComputedStyle","textContent","targetStyle","needs_prefixing","sourceValue","defaultValue","parentValue","indexOf","this"],"mappings":";AAAA,CAAA,SAAWA,GACP,aAEA,MAAMC,EAgdN,WACIC,IAAIC,EAAY,EAEhB,MAAO,CACHC,OA6NJ,SAAqBC,GACjB,OAAOA,EAAOC,QAAQ,yBAA0B,MAAM,CAC1D,EA9NIC,UA+DJ,SAAmBC,GACf,MAAkC,CAAC,IAA5BA,EAAIC,OAAO,UAAU,CAChC,EAhEIC,aAoFJ,SAAsBC,GAClB,GAAIA,EAAOC,OACP,OAAO,IAAIC,QAAQ,SAAUC,GACzBH,EAAOC,OAAOE,CAAO,CACzB,CAAC,EAGL,OAzBJ,SAAgBH,GACZ,OAAO,IAAIE,QAAQ,SAAUC,GACzB,IAAMC,EAAeC,EAAKL,EAAOM,UAAU,EAAEC,MAAM,GAAG,EAAE,EAAE,EACpDC,EAASJ,EAAaI,OACtBC,EAAc,IAAIC,WAAWF,CAAM,EAEzC,IAAKjB,IAAIoB,EAAI,EAAGA,EAAIH,EAAQG,CAAC,GACzBF,EAAYE,GAAKP,EAAaQ,WAAWD,CAAC,EAG9CR,EACI,IAAIU,KAAK,CAACJ,GAAc,CACpBK,KAAM,WACV,CAAC,CACL,CACJ,CAAC,CACL,EASkBd,CAAM,CACxB,EA3FIe,WA6FJ,SAAoBlB,EAAKmB,GACrB,IAAMC,EAAMC,SAASC,eAAeC,mBAAmB,EACjDC,EAAOJ,EAAIK,cAAc,MAAM,EAE/BC,GADNN,EAAIO,KAAKC,YAAYJ,CAAI,EACfJ,EAAIK,cAAc,GAAG,GAI/B,OAHAL,EAAIS,KAAKD,YAAYF,CAAC,EACtBF,EAAKM,KAAOX,EACZO,EAAEI,KAAO9B,EACF0B,EAAEI,IACb,EArGIC,aAoIJ,SAAsB/B,GAClBN,IAAIsC,EAAaC,EAAWC,KAAKC,SAASC,KAAK,SAAUC,GACrD,OAAOA,EAAGrC,MAAQA,CACtB,CAAC,EAEIgC,IACDA,EAAa,CACThC,IAAKA,EACLsC,QAAS,IACb,EACAL,EAAWC,KAAKC,SAASI,KAAKP,CAAU,GAGjB,OAAvBA,EAAWM,UACPL,EAAWC,KAAKM,QAAQC,YAGxBzC,IAAQ,KAAK0C,KAAK1C,CAAG,EAAI,IAAM,MAAO,IAAI2C,MAAOC,QAAQ,GAG7DZ,EAAWM,QAAU,IAAIjC,QAAQ,SAAUC,GACvC,MAAMuC,EAAcZ,EAAWC,KAAKM,QAAQK,YACtCC,EAAU,IAAIC,eAEpBD,EAAQE,mBAkBR,WACI,GAA2B,IAAvBF,EAAQG,WAIZ,GAAuB,MAAnBH,EAAQI,OACJC,EACA7C,EAAQ6C,CAAW,EAEnBC,4BAC8BpD,cAAgB8C,EAAQI,MACtD,MANR,CAYA,MAAMG,EAAU,IAAIC,WACpBD,EAAQE,UAAY,WAChBjD,EAAQ+C,EAAQG,MAAM,CAC1B,EACAH,EAAQI,cAAcX,EAAQY,QAAQ,CANtC,CAOJ,EAvCAZ,EAAQa,UAyCR,WACQR,EACA7C,EAAQ6C,CAAW,EAEnBC,gBACkBP,wCAAkD7C,CACpE,CAER,EAhDA8C,EAAQc,aAAe,OACvBd,EAAQe,QAAUhB,EACdZ,EAAWC,KAAKM,QAAQsB,iBACxBhB,EAAQiB,gBAAkB,CAAA,GAE9BjB,EAAQkB,KAAK,MAAOhE,EAAK,CAAA,CAAI,EAC7B8C,EAAQmB,KAAK,EAEbvE,IAAIyD,EACJ,IACUzC,EAwCV,SAAS0C,EAAKc,GACVC,QAAQC,MAAMF,CAAO,EACrB5D,EAAQ,EAAE,CACd,CA5CI2B,EAAWC,KAAKM,QAAQ6B,mBAClB3D,EAAQuB,EAAWC,KAAKM,QAAQ6B,iBAAiB3D,MAAM,GAAG,IACnDA,EAAM,KACfyC,EAAczC,EAAM,GA0ChC,CAAC,GAEL,OAAOsB,EAAWM,OACtB,EAtNIgC,IAsGJ,WACI,MAAO,KAII,QAASC,KAAKC,OAAO,EAAID,KAAKE,IAAI,GAAI,CAAC,GAAM,GAAGC,SACnD,EACJ,GAAIC,MAAM,CAAC,CAAC,EANehF,CAAS,EAQ5C,EA9GIiF,MA2NJ,SAAeC,GACX,OAAO,SAAUC,GACb,OAAO,IAAIzE,QAAQ,SAAUC,GACzByE,WAAW,WACPzE,EAAQwE,CAAG,CACf,EAAGD,CAAE,CACT,CAAC,CACL,CACJ,EAlOIG,QAoOJ,SAAiBC,GACb,IAAMC,EAAQ,GACRvE,EAASsE,EAAUtE,OACzB,IAAKjB,IAAIoB,EAAI,EAAGA,EAAIH,EAAQG,CAAC,GACzBoE,EAAM3C,KAAK0C,EAAUnE,EAAE,EAG3B,OAAOoE,CACX,EA3OIC,YA6OJ,SAAqBtF,GACjB,OAAOA,EAAOC,QAAQ,KAAM,KAAK,EAAEA,QAAQ,KAAM,KAAK,EAAEA,QAAQ,MAAO,KAAK,CAChF,EA9OIsF,UA6GJ,SAAmBC,GACf,MAAY,WAARA,EAIG,IAAIhF,QAAQ,SAAUC,EAASgF,GAClC,MAAMC,EAAQ,IAAIC,MACdvD,EAAWC,KAAKM,QAAQsB,iBACxByB,EAAME,YAAc,mBAExBF,EAAMG,OAAS,WACXpF,EAAQiF,CAAK,CACjB,EACAA,EAAMI,QAAUL,EAChBC,EAAMK,IAAMP,CAChB,CAAC,EAbUhF,QAAQC,QAAQ,CAc/B,EA5HIuF,MA+OJ,SAAeC,GACX,IAAID,EAAQE,EAAGD,EAAM,OAAO,EAC5B,CAAA,IACUE,EACAC,EAFNC,MAAML,CAAK,IACLG,EAAaD,EAAGD,EAAM,mBAAmB,EACzCG,EAAcF,EAAGD,EAAM,oBAAoB,EACjDD,EAAQC,EAAKK,YAAcH,EAAaC,EAC5C,CACA,OAAOJ,CACX,EAtPIO,OAwPJ,SAAgBN,GACZ,IAAIM,EAASL,EAAGD,EAAM,QAAQ,EAC9B,CAAA,IACUO,EACAC,EAFNJ,MAAME,CAAM,IACNC,EAAYN,EAAGD,EAAM,kBAAkB,EACvCQ,EAAeP,EAAGD,EAAM,qBAAqB,EACnDM,EAASN,EAAKS,aAAeF,EAAYC,EAC7C,CACA,OAAOF,CACX,EA/PII,UAAWA,EACXC,UAmBJ,SAAmBC,GACf,OAAOA,aAAiBF,EAAUE,CAAK,EAAEC,OAC7C,EApBIC,cA0BJ,SAAuBF,GACnB,OAAOA,aAAiBF,EAAUE,CAAK,EAAEG,WAC7C,EA3BIC,oBAqBJ,SAA6BJ,GACzB,OAAOA,aAAiBF,EAAUE,CAAK,EAAEK,iBAC7C,EAtBIC,mBAgCJ,SAA4BN,GACxB,OAAOA,aAAiBF,EAAUE,CAAK,EAAEO,gBAC7C,EAjCIC,mBA2BJ,SAA4BR,GACxB,OAAOA,aAAiBF,EAAUE,CAAK,EAAES,gBAC7C,EA5BIC,sBA0CJ,SAA+BV,GAC3B,OAAOA,aAAiBF,EAAUE,CAAK,EAAEW,mBAC7C,EA3CIC,aAiCJ,SAAsBZ,GAClB,OAAOA,aAAiBF,EAAUE,CAAK,EAAEa,UAC7C,EAlCIC,iBAoCJ,SAA0Bd,GACtB,OAAOA,aAAiBF,EAAUE,CAAK,EAAEe,cAC7C,CArCA,EAEA,SAASjB,EAAUV,GACT4B,EAAgB5B,EAAOA,EAAK4B,cAAgBC,KAAAA,EAClD,OACKD,EAAgBA,EAAcE,YAAcD,KAAAA,IAC7CnI,GACAqI,MAER,CA+OA,SAAS9B,EAAGD,EAAMgC,GACdpI,IAAIgH,EAAQqB,EAAiBjC,CAAI,EAAEkC,iBAAiBF,CAAa,EACjE,MAAwB,OAApBpB,EAAM/B,MAAM,CAAC,CAAC,EACPsD,KAEXvB,EAAQA,EAAM/B,MAAM,EAAG,CAAC,CAAC,EAClBuD,WAAWxB,CAAK,EAC3B,CACJ,EAzuBqB,EACfyB,EA0uBN,WACI,MAAMC,EAAY,8BAElB,MAAO,CACHC,UAyCJ,SAAmBxI,EAAQsB,EAASmH,GAChC,GAiBW,CAACC,EAAc1I,CAAM,EAhB5B,OAAOQ,QAAQC,QAAQT,CAAM,EAGjC,OAAOQ,QAAQC,QAAQT,CAAM,EACxB2I,KAAKC,CAAQ,EACbD,KAAK,SAAUE,GACZhJ,IAAIiJ,EAAOtI,QAAQC,QAAQT,CAAM,EAMjC,OALA6I,EAAKE,QAAQ,SAAU5I,GACnB2I,EAAOA,EAAKH,KAAK,SAAUK,GACvB,OAAOC,EAAOD,EAAQ7I,EAAKmB,EAASmH,CAAG,CAC3C,CAAC,CACL,CAAC,EACMK,CACX,CAAC,CAKT,EA5DIJ,cAAeA,EACfrG,KAAM,CACFuG,SAAUA,EACVK,OAAQA,CACZ,CACJ,EAEA,SAASP,EAAc1I,GACnB,MAAoC,CAAC,IAA9BA,EAAOI,OAAOmI,CAAS,CAClC,CAEA,SAASK,EAAS5I,GAGd,IAFA,IACIkJ,EADEvF,EAAS,GAE6B,QAApCuF,EAAQX,EAAUY,KAAKnJ,CAAM,IACjC2D,EAAOjB,KAAKwG,EAAM,EAAE,EAExB,OAAOvF,EAAOyF,OAAO,SAAUjJ,GAC3B,MAAO,CAACP,EAAKM,UAAUC,CAAG,CAC9B,CAAC,CACL,CAEA,SAAS8I,EAAOjJ,EAAQG,EAAKmB,EAASmH,GAClC,OAAOjI,QAAQC,QAAQN,CAAG,EACrBwI,KAAK,SAAUU,GACZ,OAAO/H,EAAU1B,EAAKyB,WAAWgI,EAAU/H,CAAO,EAAI+H,CAC1D,CAAC,EACAV,KAAKF,GAAO7I,EAAKsC,YAAY,EAC7ByG,KAAK,SAAUW,GACZ,OAAOtJ,EAAOC,SAGFoJ,EAHqBlJ,EAI9B,IAAIoJ,wBACU3J,EAAKG,OAAOsJ,CAAQ,eACrC,GACJ,QAPgDC,KAAW,EAG/D,IAAoBD,CAFhB,CAAC,CAQT,CAuBJ,EA5yB2B,EACrBG,EA8yBK,CACHC,WAMJ,WACI,OAAOC,EAAQ,EACVf,KAAK,SAAUgB,GACZ,OAAOnJ,QAAQoJ,IACXD,EAASE,IAAI,SAAUC,GACnB,OAAOA,EAAQrJ,QAAQ,CAC3B,CAAC,CACL,CACJ,CAAC,EACAkI,KAAK,SAAUoB,GACZ,OAAOA,EAAWC,KAAK,IAAI,CAC/B,CAAC,CACT,EAjBI3H,KAAM,CACFqH,QAASA,CACb,CACJ,EAgBA,SAASA,IACL,OAAOlJ,QAAQC,QAAQb,EAAKuF,QAAQ3D,SAASyI,WAAW,CAAC,EACpDtB,KAgBL,SAAqBsB,GACjB,MAAMC,EAAW,GAoBjB,OAnBAD,EAAYlB,QAAQ,SAAUoB,GAC1B,GACIC,OAAOC,UAAUC,eAAeC,KAC5BH,OAAOI,eAAeL,CAAK,EAC3B,UACJ,EAEA,IACIvK,EAAKuF,QAAQgF,EAAMD,UAAY,EAAE,EAAEnB,QAC/BmB,EAASxH,KAAK+H,KAAKP,CAAQ,CAC/B,CAMJ,CALE,MAAOQ,GACLpG,QAAQqG,IACJ,sCAAsCR,EAAMlI,KAC5CyI,EAAE7F,SAAS,CACf,CACJ,CAER,CAAC,EACMqF,CACX,CAtCqB,EAChBvB,KAKL,SAA4BuB,GACxB,OAAOA,EACFd,OAAO,SAAUwB,GACd,OAAOA,EAAKxJ,OAASyJ,QAAQC,cACjC,CAAC,EACA1B,OAAO,SAAUwB,GACd,OAAOtC,EAAQI,cAAckC,EAAKG,MAAM5C,iBAAiB,KAAK,CAAC,CACnE,CAAC,CACT,CAb4B,EACvBQ,KAAK,SAAUqC,GACZ,OAAOA,EAAMnB,IAAIoB,CAAU,CAC/B,CAAC,EAoCL,SAASA,EAAWC,GAChB,MAAO,CACHzK,QAAS,WACL,IAAMa,GAAW4J,EAAYC,kBAAoB,IAAIlJ,KACrD,OAAOqG,EAAQE,UAAU0C,EAAYE,QAAS9J,CAAO,CACzD,EACAyE,IAAK,WACD,OAAOmF,EAAYH,MAAM5C,iBAAiB,KAAK,CACnD,CACJ,CACJ,CACJ,CAv3BJ,MAAMkD,EA23BK,CACH7C,UA6BJ,SAASA,EAAUvC,GACf,GAAI,CAACrG,EAAKgH,UAAUX,CAAI,EACpB,OAAOzF,QAAQC,QAAQwF,CAAI,EAG/B,OAAOqF,EAAkBrF,CAAI,EAAE0C,KAAK,WAChC,OAAI/I,EAAKyH,mBAAmBpB,CAAI,EACrBsF,EAAStF,CAAI,EAAEgD,OAAO,EAEtBzI,QAAQoJ,IACXhK,EAAKuF,QAAQc,EAAKuF,UAAU,EAAE3B,IAAI,SAAU4B,GACxC,OAAOjD,EAAUiD,CAAK,CAC1B,CAAC,CACL,CAER,CAAC,EAED,SAASH,EAAkBrF,GACvB,MAAMyF,EAAa,CAAC,aAAc,oBAE5BC,EAAgBD,EAAW7B,IAAI,SAAU+B,GAC3C,MAAM/E,EAAQZ,EAAK8E,MAAM5C,iBAAiByD,CAAY,EAChDC,EAAW5F,EAAK8E,MAAMe,oBAAoBF,CAAY,EAE5D,OAAK/E,EAIEyB,EAAQE,UAAU3B,CAAK,EAAE8B,KAAK,SAAUoD,GAC3C9F,EAAK8E,MAAMiB,YAAYJ,EAAcG,EAAcF,CAAQ,CAC/D,CAAC,EALUrL,QAAQC,QAAQ,CAM/B,CAAC,EAED,OAAOD,QAAQoJ,IAAI+B,CAAa,EAAEhD,KAAK,WACnC,OAAO1C,CACX,CAAC,CACL,CACJ,EAjEI5D,KAAM,CACFkJ,SAAUA,CACd,CACJ,EAEA,SAASA,EAASU,GACd,MAAO,CACHhD,OAGJ,SAAgBR,GACZ,GAAI7I,EAAKM,UAAU+L,EAAQlG,GAAG,EAC1B,OAAOvF,QAAQC,QAAQ,EAG3B,OAAOD,QAAQC,QAAQwL,EAAQlG,GAAG,EAC7B4C,KAAKF,GAAO7I,EAAKsC,YAAY,EAC7ByG,KAAK,SAAUW,GACZ,OAAO,IAAI9I,QAAQ,SAAUC,GACzBwL,EAAQpG,OAASpF,EAEjBwL,EAAQnG,QAAUrF,EAClBwL,EAAQlG,IAAMuD,CAClB,CAAC,CACL,CAAC,CACT,CAjBA,CAkBJ,CAp5BJ,MAAM4C,EAAiB,CAEnB1H,iBAAkBsD,KAAAA,EAElBlF,UAAW,CAAA,EAEXqB,eAAgB,CAAA,EAEhBjB,YAAa,GACjB,EAEMZ,EAAa,CACf+J,MAAOA,EACPC,MAoHJ,SAAenG,EAAMtD,GACjB,OAAO0J,EAAKpG,EAAMtD,CAAO,EAAEgG,KAAK,SAAUrI,GACtC,OAAOA,EAAOM,UAAU,CAC5B,CAAC,CACL,EAvHI0L,OA8HJ,SAAgBrG,EAAMtD,GAClB,OAAO0J,EAAKpG,EAAMtD,CAAO,EAAEgG,KAAK,SAAUrI,GACtC,OAAOA,EAAOM,UACV,cACC+B,EAAUA,EAAQ4J,QAAUzE,KAAAA,IAAc,CAC/C,CACJ,CAAC,CACL,EApIIvH,OA2IJ,SAAgB0F,EAAMtD,GAClB,OAAO0J,EAAKpG,EAAMtD,CAAO,EAAEgG,KAAK/I,EAAKS,YAAY,CACrD,EA5IImM,YAoGJ,SAAqBvG,EAAMtD,GACvB,OAAO0J,EAAKpG,EAAMtD,CAAO,EAAEgG,KAAK,SAAUrI,GACtC,OAAOA,EACFmM,WAAW,IAAI,EACfC,aAAa,EAAG,EAAG9M,EAAKoG,MAAMC,CAAI,EAAGrG,EAAK2G,OAAON,CAAI,CAAC,EAAE0G,IACjE,CAAC,CACL,EAzGIC,SAmJOP,EAlJPhK,KAAM,CACFmH,UAAWA,EACX6B,OAAQA,EACRzL,KAAMA,EACN0I,QAASA,EACThG,SAAU,GACVK,QAAS,EACb,CACJ,EASMuF,GAPiB,UAAnB,OAAO2E,SAA0C,UAAlB,OAAOC,OACtCA,OAAOD,QAAUzK,EAEjBzC,EAAOyC,WAAaA,EAICzC,EAAOuI,kBAAoBF,OAAOE,kBACrDvH,EAAOhB,EAAOgB,MAAQqH,OAAOrH,KAqBnC,SAASwL,EAAMlG,EAAMtD,GACjB,MAAMoK,EAAc3K,EAAWC,KAAKzC,KAAK+G,UAAUV,CAAI,EAEvD+G,IA2GiBrK,EA5GjBA,EAAUA,GAAW,GAErB,OA4GwC,KAAA,IAA7BA,EAAQ6B,iBACfpC,EAAWC,KAAKM,QAAQ6B,iBAAmB0H,EAAe1H,iBAE1DpC,EAAWC,KAAKM,QAAQ6B,iBAAmB7B,EAAQ6B,iBAGtB,KAAA,IAAtB7B,EAAQC,UACfR,EAAWC,KAAKM,QAAQC,UAAYsJ,EAAetJ,UAEnDR,EAAWC,KAAKM,QAAQC,UAAYD,EAAQC,UAGV,KAAA,IAA3BD,EAAQsB,eACf7B,EAAWC,KAAKM,QAAQsB,eAAiBiI,EAAejI,eAExD7B,EAAWC,KAAKM,QAAQsB,eAAiBtB,EAAQsB,eAGlB,KAAA,IAAxBtB,EAAQK,YACfZ,EAAWC,KAAKM,QAAQK,YAAckJ,EAAelJ,YAErDZ,EAAWC,KAAKM,QAAQK,YAAcL,EAAQK,YAjI3CxC,QAAQC,QAAQwF,CAAI,EACtB0C,KAAK,SAAUsE,GACZ,OAuKZ,SAASC,EAAUjH,EAAMmD,EAAQ+D,EAAsBJ,GACnD,GACI9G,IAASmH,GACiB,OAAzBD,GAAiC/D,GAAU,CAACA,EAAOnD,CAAI,EAExD,OAAOzF,QAAQC,QAAQ,EAG3B,OAAOD,QAAQC,QAAQwF,CAAI,EACtB0C,KAAK0E,CAAY,EACjB1E,KAAK,SAAU2E,GACZ,OAAOC,EAActH,EAAMqH,CAAK,CACpC,CAAC,EACA3E,KAAK,SAAU2E,GACZ,OAAOE,EAAavH,EAAMqH,CAAK,CACnC,CAAC,EAEL,SAASD,EAAaI,GAClB,OAAO7N,EAAKqH,oBAAoBwG,CAAQ,EAClC7N,EAAK2F,UAAUkI,EAAS7M,UAAU,CAAC,EACnC6M,EAASP,UAAU,CAAA,CAAK,CAClC,CAEA,SAASK,EAAcE,EAAUH,GAC7B,MAAMI,EAAmBD,EAASjC,WAClC3L,IAAIiJ,EAAOtI,QAAQC,QAAQ,EAE3B,GAAgC,IAA5BiN,EAAiB5M,OAAc,CAC/B,MAAM6M,EAAyBzF,EAAiBuF,CAAQ,EAExD7N,EAAKuF,QAAQuI,CAAgB,EAAE3E,QAAQ,SAAU6E,GAC7C9E,EAAOA,EAAKH,KAAK,WACb,OAAOuE,EACHU,EACAxE,EACAuE,EACAZ,CACJ,EAAEpE,KAAK,SAAUkF,GACTA,GACAP,EAAMvL,YAAY8L,CAAW,CAErC,CAAC,CACL,CAAC,CACL,CAAC,CACL,CAEA,OAAO/E,EAAKH,KAAK,WACb,OAAO2E,CACX,CAAC,CACL,CAEA,SAASE,EAAaC,EAAUH,GAC5B,OAAK1N,EAAKgH,UAAU0G,CAAK,EAIlB9M,QAAQC,QAAQ,EAClBkI,KAAKmF,CAAU,EACfnF,KAAKoF,CAAmB,EACxBpF,KAAKqF,CAAa,EAClBrF,KAAKsF,CAAM,EACXtF,KAAK,WACF,OAAO2E,CACX,CAAC,EAVMA,EAYX,SAASQ,IAGL,SAASI,EAASC,EAAQC,GACtBA,EAAOC,KAAOF,EAAOE,KACrBD,EAAOE,WAAaH,EAAOG,WAC3BF,EAAOG,oBAAsBJ,EAAOI,oBACpCH,EAAOI,YAAcL,EAAOK,YAC5BJ,EAAOK,SAAWN,EAAOM,SACzBL,EAAOM,YAAcP,EAAOO,YAC5BN,EAAOO,UAAYR,EAAOQ,UAC1BP,EAAOQ,YAAcT,EAAOS,YAC5BR,EAAOS,gBAAkBV,EAAOU,gBAChCT,EAAOU,qBAAuBX,EAAOW,qBACrCV,EAAOW,qBAAuBZ,EAAOY,qBACrCX,EAAOY,mBAAqBb,EAAOa,mBACnCZ,EAAOa,sBAAwBd,EAAOc,sBACtCb,EAAOc,WAAaf,EAAOe,UAC/B,CAEA,SAASC,EAAUC,EAAeC,GAC9B,MAAMC,EAAuBpH,EAAiBkH,CAAa,EACvDE,EAAqBlE,SACrBiE,EAActE,MAAMK,QAAUkE,EAAqBlE,QACnD8C,EAASoB,EAAsBD,EAActE,KAAK,IAElDwE,EACID,EACAnC,EACAkC,CACJ,EAG6B,OAAzBlC,IACA,CACI,cACA,oBACA,mBACFpE,QAAQ,GAAUsG,EAActE,MAAMyE,eAAeC,CAAI,CAAC,EAC5D,CAAC,OAAQ,QAAS,MAAO,UAAU1G,QAAQ,IACnCsG,EAActE,MAAM5C,iBAAiBsH,CAAI,GACzCJ,EAActE,MAAMiB,YAAYyD,EAAM,KAAK,CAEnD,CAAC,GAGb,CA7CAN,EAAU1B,EAAUH,CAAK,CA8C7B,CAEA,SAASS,IACL,MAAM2B,EAAiB9P,EAAK6E,IAAI,EAMhC,SAASkL,EAAmB1D,GACxB,MAAMlB,EAAQ7C,EAAiBuF,EAAUxB,CAAO,EAC1C2D,EAAU7E,EAAM5C,iBAAiB,SAAS,EAEhD,GAAgB,KAAZyH,GAA8B,SAAZA,EAAtB,CAIA,MAAMC,EAAevC,EAAMwC,aAAa,OAAO,GAAK,GAG9CC,GAFNzC,EAAM0C,aAAa,QAAYH,EAAH,IAAmBH,CAAgB,EAE1ClO,SAASI,cAAc,OAAO,GAInD,SAASqO,IACL,MAAMC,MAAeR,KAAkBzD,EACjCb,GAAUL,EAAMK,QAChB+E,EACAC,GADc,EAGpB,OAAO5O,SAAS6O,eAAkBH,MAAY9E,IAAU,EAExD,SAAS+E,IACL,SAAUpF,EAAMK,oBAAoBwE,IACxC,CAEA,SAASQ,IACL,MAAME,EAAY1Q,EACbuF,QAAQ4F,CAAK,EACblB,IAAI0G,CAAc,EAClBvG,KAAK,IAAI,EACd,OAAUsG,EAAH,IAEP,SAASC,EAAeC,GACpB,MAAMC,EAAgB1F,EAAM5C,iBAAiBqI,CAAI,EAC3CE,EAAmB3F,EAAMe,oBAAoB0E,CAAI,EACjD,cACA,GACN,OAAUA,EAAH,KAAYC,EAAgBC,CACvC,CACJ,CACJ,CA9BAX,EAAahO,YAAYkO,EAAyB,CAAC,EACnD3C,EAAMvL,YAAYgO,CAAY,CAP9B,CAqCJ,CA/CA,CAAC,UAAW,UAAUhH,QAAQ,SAAUkD,GACpC0D,EAAmB1D,CAAO,CAC9B,CAAC,CA8CL,CAEA,SAAS+B,IACDpO,EAAK2H,sBAAsBkG,CAAQ,IACnCH,EAAMqD,UAAYlD,EAAS5G,OAE3BjH,EAAKuH,mBAAmBsG,CAAQ,GAChCH,EAAM0C,aAAa,QAASvC,EAAS5G,KAAK,CAElD,CAEA,SAASoH,IACDrO,EAAK6H,aAAa6F,CAAK,IACvBA,EAAM0C,aAAa,QAAS,4BAA4B,EAEpDpQ,EAAK+H,iBAAiB2F,CAAK,IAC3B,CAAC,QAAS,UAAUvE,QAAQ,SAAU6H,GAClC,MAAM/J,EAAQyG,EAAMwC,aAAac,CAAS,EACtC/J,GACAyG,EAAMvC,MAAMiB,YAAY4E,EAAW/J,CAAK,CAEhD,CAAC,CAGb,CACJ,CACJ,EAtW6BoG,EAAQtK,EAAQyG,OAAQ,KAAM2D,CAAW,CAC9D,CAAC,EACApE,KAAKkI,CAAU,EACflI,KAAKmI,CAAY,EACjBnI,KAeL,SAAsB2E,GACd3K,EAAQoO,UACRzD,EAAMvC,MAAMiG,gBAAkBrO,EAAQoO,SAEtCpO,EAAQqD,QACRsH,EAAMvC,MAAM/E,MAAWrD,EAAQqD,MAAX,MAEpBrD,EAAQ4D,SACR+G,EAAMvC,MAAMxE,OAAY5D,EAAQ4D,OAAX,MAGrB5D,EAAQoI,OACRX,OAAO6G,KAAKtO,EAAQoI,KAAK,EAAEhC,QAAQ,SAAUmI,GACzC5D,EAAMvC,MAAMmG,GAAYvO,EAAQoI,MAAMmG,EAC1C,CAAC,EAGLrR,IAAIsR,EAAgB,KAEW,YAA3B,OAAOxO,EAAQyO,UACfD,EAAgBxO,EAAQyO,QAAQ9D,CAAK,GAGzC,OAAO9M,QAAQC,QAAQ0Q,CAAa,EAAExI,KAAK,WACvC,OAAO2E,CACX,CAAC,CACL,CAzCsB,EACjB3E,KAAK,SAAU2E,GACZ,OAmXYrH,EAlXRqH,EAkXctH,EAjXdrD,EAAQqD,OAASpG,EAAKoG,MAAMC,CAAI,EAiXXM,EAhXrB5D,EAAQ4D,QAAU3G,EAAK2G,OAAON,CAAI,EAiXvCzF,QAAQC,QAAQwF,CAAI,EACtB0C,KAAK,SAAU0I,GAEZ,OADAA,EAAIrB,aAAa,QAAS,8BAA8B,GACjD,IAAIsB,eAAgBC,kBAAkBF,CAAG,CACpD,CAAC,EACA1I,KAAK/I,EAAK0F,WAAW,EACrBqD,KAAK,SAAU6I,GACZ,+BAAgCxL,cAAkBO,MAAWiL,mBACjE,CAAC,EACA7I,KAAK,SAAU8I,GACZ,wDAAyDzL,cAAkBO,MAAWkL,SAC1F,CAAC,EACA9I,KAAK,SAAU0I,GACZ,MAAO,oCAAoCA,CAC/C,CAAC,EAfT,IAA8BrL,EAAOO,CA9W7B,CAAC,EACAoC,KAEL,SAAoBhF,GAEhB,OADAvB,EAAWC,KAAKC,SAAW,GACpBqB,CACX,CALoB,CAkCxB,CAqFA,SAAS0I,EAAKqF,EAAS/O,GAEnB,OAAOwJ,EAAMuF,EADb/O,EAAUA,GAAW,EACQ,EACxBgG,KAAK/I,EAAK2F,SAAS,EACnBoD,KAAK,SAAUjD,GACZ,IAAMiM,EAAiC,UAAzB,OAAOhP,EAAQgP,MAAqB,EAAIhP,EAAQgP,MACxDrR,EAad,SAAmB2F,EAAM0L,GACrB,IAAMrR,EAASkB,SAASI,cAAc,QAAQ,EAC9CtB,EAAO0F,OAASrD,EAAQqD,OAASpG,EAAKoG,MAAMC,CAAI,GAAK0L,EACrDrR,EAAOiG,QAAU5D,EAAQ4D,QAAU3G,EAAK2G,OAAON,CAAI,GAAK0L,EAEpDhP,EAAQoO,WACFa,EAAMtR,EAAOmM,WAAW,IAAI,GAC9BoF,UAAYlP,EAAQoO,QACxBa,EAAIE,SAAS,EAAG,EAAGxR,EAAO0F,MAAO1F,EAAOiG,MAAM,GAGlD,OAAOjG,CACX,EAzBiCoR,EAASC,CAAK,EACjCC,EAAMtR,EAAOmM,WAAW,IAAI,EASlC,OARAmF,EAAIG,yBAA2B,CAAA,EAC/BH,EAAII,wBAA0B,CAAA,EAC9BJ,EAAIK,sBAAwB,CAAA,EACxBvM,IACAkM,EAAID,MAAMA,EAAOA,CAAK,EACtBC,EAAIM,UAAUxM,EAAO,EAAG,CAAC,GAs0BjC0H,IACA5L,SAASQ,KAAKmQ,YAAY/E,CAAO,EACjCA,EAAU,MAGVgF,GACAC,aAAaD,CAA4B,EAG7CA,EAA+BlN,WAAW,KACtCkN,EAA+B,KAC/BE,EAAuB,EAC3B,EAAG,GAAS,EA/0BGhS,CACX,CAAC,CAeT,CAEAT,IAAIuN,EAAU,KAmMd,SAASyD,EAAW5K,GAChB,OAAOuD,EAAUC,WAAW,EAAEd,KAAK,SAAUyC,GACzC,IACUmH,EAIV,MALgB,KAAZnH,IACMmH,EAAY/Q,SAASI,cAAc,OAAO,EAChDqE,EAAKlE,YAAYwQ,CAAS,EAC1BA,EAAUxQ,YAAYP,SAAS6O,eAAejF,CAAO,CAAC,GAEnDnF,CACX,CAAC,CACL,CAEA,SAAS6K,EAAa7K,GAClB,OAAOoF,EAAO7C,UAAUvC,CAAI,EAAE0C,KAAK,WAC/B,OAAO1C,CACX,CAAC,CACL,CAuhBA,SAASsJ,EACLD,EACAnC,EACAkC,GAEA,MAAMmD,EAyBV,SAAyBC,GACrB,GAAIH,EAAqBG,GACrB,OAAOH,EAAqBG,GAEhC,CAAA,IASUC,EATLtF,KAIDA,EAAU5L,SAASI,cAAc,QAAQ,GACjCmJ,MAAM4H,WAAa,SAC3BvF,EAAQrC,MAAM6H,SAAW,QACzBpR,SAASQ,KAAKD,YAAYqL,CAAO,GAE3BsF,EAAUlR,SAASI,cAAc,MAAM,GACrCoO,aAAa,UAAWxO,SAASqR,cAAgB,OAAO,EAChEzF,EAAQ0F,gBAAgBhR,KAAKC,YAAY2Q,CAAO,EAChDtF,EAAQ0F,gBAAgBC,MAAQ,UACpC,CACA,MAAMC,EAAgB5F,EAAQ6F,cACxBC,EAAkBF,EAAcxR,SAChC2R,EAAiBD,EAAgBtR,cAAc6Q,CAAO,EAKtDW,GAJNJ,EAAcxR,SAASQ,KAAKD,YAAYoR,CAAc,EAGtDA,EAAeE,YAAc,IACAL,EAAc9K,iBAAiBiL,CAAc,GAEpEX,EAAe,GAWrB,OARA5S,EAAKuF,QAAQiO,CAAoB,EAAErK,QAAQ,SAAUyH,GACjDgC,EAAahC,GACA,UAATA,GAA6B,WAATA,EACd,OACA4C,EAAqBjL,iBAAiBqI,CAAI,CACxD,CAAC,EACD0C,EAAgBlR,KAAKmQ,YAAYgB,CAAc,EAC/Cb,EAAqBG,GAAWD,CAEpC,EAhEyCnD,EAAcoD,OAAO,EACpDa,EAAcjE,EAActE,MAElCnL,EAAKuF,QAAQmK,CAAoB,EAAEvG,QAAQ,SAAUyH,GACjD,IAvBE+C,EAuBIC,EAAclE,EAAqBnH,iBAAiBqI,CAAI,EACxDiD,EAAejB,EAAahC,GAC5BkD,EAAcvG,EACdA,EAAqBhF,iBAAiBqI,CAAI,EAC1C1I,KAAAA,GAKF0L,IAAgBC,GACftG,GAAwBqG,IAAgBE,KAEnC7H,EAAWyD,EAAqBxD,oBAAoB0E,CAAI,EApChD8C,EAqCGA,EArCgBzM,EAqCG2M,EArCI3H,EAqCSA,EApCnD0H,EAAuD,GAArC,CAAC,mBAAmBI,QADTnD,EAqCGA,CApCkB,EACpD3E,GACAyH,EAAYtH,YAAYwE,EAAM3J,EAAOgF,CAAQ,EACzC0H,GACAD,EAAYtH,YAAY,WAAWwE,EAAQ3J,EAAOgF,CAAQ,IAG9DyH,EAAYtH,YAAYwE,EAAM3J,CAAK,EAC/B0M,GACAD,EAAYtH,YAAY,WAAWwE,EAAQ3J,CAAK,GA6BxD,CAAC,CACL,CAEAhH,IAAIuS,EAA+B,KAC/BE,EAAuB,EA0D9B,EAAEsB,IAAI"}