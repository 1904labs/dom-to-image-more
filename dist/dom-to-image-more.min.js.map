{"version":3,"file":"dom-to-image-more.min.js","sources":["../src/dom-to-image-more.js"],"names":["global","util","let","uid_index","escape","string","replace","isDataUrl","url","search","canvasToBlob","canvas","toBlob","Promise","resolve","binaryString","atob","toDataURL","split","length","binaryArray","Uint8Array","i","charCodeAt","Blob","type","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","a","head","appendChild","body","href","getAndEncode","cacheEntry","domtoimage","impl","urlCache","find","el","promise","push","options","cacheBust","test","Date","getTime","httpTimeout","request","XMLHttpRequest","onreadystatechange","readyState","status","placeholder","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","useCredentials","withCredentials","open","send","message","console","error","imagePlaceholder","uid","Math","random","pow","toString","slice","delay","ms","arg","setTimeout","asArray","arrayLike","array","escapeXhtml","makeImage","uri","reject","image","Image","crossOrigin","onload","onerror","src","width","node","px","leftBorder","rightBorder","isNaN","scrollWidth","height","topBorder","bottomBorder","scrollHeight","getWindow","isElement","isElementHostForOpenShadowRoot","value","shadowRoot","isShadowRoot","isInShadowRoot","isHTMLElement","HTMLElement","isHTMLCanvasElement","HTMLCanvasElement","isHTMLInputElement","HTMLInputElement","isHTMLImageElement","HTMLImageElement","isHTMLLinkElement","HTMLLinkElement","isHTMLScriptElement","HTMLScriptElement","isHTMLStyleElement","HTMLStyleElement","isHTMLTextAreaElement","HTMLTextAreaElement","isShadowSlotElement","HTMLSlotElement","isSVGElement","SVGElement","isSVGRectElement","SVGRectElement","ownerDocument","undefined","defaultView","window","ShadowRoot","Object","prototype","hasOwnProperty","call","getRootNode","Element","styleProperty","getComputedStyle","getPropertyValue","NaN","parseFloat","inliner","URL_REGEX","inlineAll","get","shouldProcess","then","readUrls","urls","done","forEach","prefix","inline","match","exec","filter","urlValue","dataUrl","RegExp","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","getPrototypeOf","bind","e","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","images","inlineCSSProperty","newImage","childNodes","child","properties","inliningTasks","propertyName","priority","getPropertyPriority","inlinedValue","setProperty","element","defaultOptions","copyDefaultStyles","styleCaching","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","data","toCanvas","exports","module","ownerWindow","copyOptions","clonee","cloneNode","parentComputedStyles","sandbox","makeNodeCopy","clone","cloneChildren","getParentOfChildren","processClone","original","originalChildren","getRenderedChildren","originalComputedStyles","getRenderedParent","originalChild","clonedChild","host","assignedNodes","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyFont","source","target","font","fontFamily","fontFeatureSettings","fontKerning","fontSize","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariationSettings","fontWeight","copyStyle","sourceElement","targetElement","sourceComputedStyles","copyUserComputedStyleFast","removeProperty","prop","cloneClassName","clonePseudoElement","content","currentClass","getAttribute","styleElement","setAttribute","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","styleText","formatProperty","name","propertyValue","propertyPriority","innerHTML","attribute","embedFonts","inlineImages","bgcolor","backgroundColor","keys","property","onCloneResult","onclone","svg","XMLSerializer","serializeToString","xhtml","foreignObject","removeChild","removeDefaultStylesTimeoutId","clearTimeout","tagNameDefaultStyles","domNode","scale","ctx","fillStyle","fillRect","mozImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","drawImage","styleNode","defaultStyle","tagHierarchy","sourceNode","ELEMENT_NODE","Node","tagNames","nodeType","tagName","ascentStoppers","includes","parentNode","tagKey","_","sandboxWindow","contentWindow","charsetToUse","characterSet","docType","doctype","docTypeDeclaration","escapeHTML","publicId","systemId","trim","id","visibility","position","charset","title","write","metaCharset","sandboxDocument","sandboxHTML","documentElement","outerHTML","contentDocument","unsafeText","div","innerText","defaultElement","childTagName","pop","childElement","textContent","defaultComputedStyle","parentElement","targetStyle","needs_prefixing","sourceValue","defaultValue","parentValue","indexOf","this"],"mappings":"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"}