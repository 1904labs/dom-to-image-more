{"version":3,"file":"dom-to-image-more.min.js","sources":["../src/dom-to-image-more.js"],"names":["global","util","let","uid_index","escape","string","replace","parseExtension","mimeType","url","extension","toLowerCase","WOFF","JPEG","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","dataAsUrl","content","type","isDataUrl","search","canvasToBlob","canvas","toBlob","Promise","resolve","binaryString","atob","toDataURL","split","length","binaryArray","Uint8Array","i","charCodeAt","Blob","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","a","head","appendChild","body","href","getAndEncode","cacheEntry","domtoimage","impl","urlCache","find","el","promise","push","options","cacheBust","test","Date","getTime","httpTimeout","request","XMLHttpRequest","onreadystatechange","readyState","status","placeholder","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","useCredentials","withCredentials","open","send","message","console","error","imagePlaceholder","uid","Math","random","pow","toString","slice","delay","ms","arg","setTimeout","asArray","arrayLike","array","escapeXhtml","makeImage","uri","reject","image","Image","crossOrigin","onload","onerror","src","width","node","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","getWindow","isElement","value","Element","isHTMLElement","HTMLElement","isHTMLCanvasElement","HTMLCanvasElement","isHTMLInputElement","HTMLInputElement","isHTMLImageElement","HTMLImageElement","isHTMLTextAreaElement","HTMLTextAreaElement","isSVGElement","SVGElement","isSVGRectElement","SVGRectElement","ownerDocument","undefined","defaultView","ownerWindow","match","exec","styleProperty","getComputedStyle","getPropertyValue","parseFloat","inliner","URL_REGEX","inlineAll","get","shouldProcess","then","readUrls","urls","done","forEach","prefix","inline","filter","urlValue","data","dataUrl","RegExp","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","Object","getPrototypeOf","hasOwnProperty","bind","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","images","inlineCSSProperty","newImage","childNodes","child","properties","inliningTasks","propertyName","priority","getPropertyPriority","inlinedValue","setProperty","element","defaultOptions","toSvg","toPng","raster","draw","toJpeg","quality","toPixelData","getContext","getImageData","toCanvas","exports","module","window","copyOptions","clonee","cloneNode","root","vector","parentComputedStyles","makeNodeCopy","clone","cloneChildren","processClone","original","children","cloneChildrenInOrder","parent","childs","computedStyles","childClone","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyFont","source","target","font","fontFamily","fontFeatureSettings","fontKerning","fontSize","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariationSettings","fontWeight","copyStyle","sourceElement","targetElement","sourceComputedStyles","copyUserComputedStyle","copyUserComputedStyleFast","removeProperty","prop","cloneClassName","clonePseudoElement","currentClass","getAttribute","styleElement","setAttribute","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","styleText","formatProperty","name","propertyValue","propertyPriority","innerHTML","attribute","embedFonts","inlineImages","bgcolor","backgroundColor","keys","property","onCloneResult","onclone","XMLSerializer","serializeToString","xhtml","foreignObject","domNode","scale","ctx","fillStyle","fillRect","mozImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","drawImage","sandbox","removeChild","removeDefaultStylesTimeoutId","clearTimeout","tagNameDefaultStyles","styleNode","setStyleProperty","targetStyle","needs_prefixing","indexOf","inlineStyles","inlineValue","initialValue","defaultStyle","tagName","visibility","position","contentWindow","write","defaultElement","defaultComputedStyle","textContent","sourceValue","this"],"mappings":"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"}