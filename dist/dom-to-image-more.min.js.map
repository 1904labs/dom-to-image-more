{"version":3,"file":"dom-to-image-more.min.js","sources":["../src/dom-to-image-more.js"],"names":["global","util","let","uid_index","escape","string","replace","isDataUrl","url","search","canvasToBlob","canvas","toBlob","Promise","resolve","binaryString","atob","toDataURL","split","length","binaryArray","Uint8Array","i","charCodeAt","Blob","type","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","a","head","appendChild","body","href","getAndEncode","cacheEntry","domtoimage","impl","urlCache","find","el","promise","push","options","cacheBust","test","Date","getTime","httpTimeout","request","XMLHttpRequest","onreadystatechange","readyState","status","placeholder","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","useCredentials","withCredentials","open","send","message","console","error","imagePlaceholder","uid","Math","random","pow","toString","slice","delay","ms","arg","setTimeout","asArray","arrayLike","array","escapeXhtml","makeImage","uri","reject","image","Image","crossOrigin","onload","onerror","src","width","node","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","getWindow","isElement","value","Element","isHTMLElement","HTMLElement","isHTMLCanvasElement","HTMLCanvasElement","isHTMLInputElement","HTMLInputElement","isHTMLImageElement","HTMLImageElement","isHTMLTextAreaElement","HTMLTextAreaElement","isSVGElement","SVGElement","isSVGRectElement","SVGRectElement","ownerDocument","undefined","defaultView","window","styleProperty","getComputedStyle","getPropertyValue","parseFloat","inliner","URL_REGEX","inlineAll","get","shouldProcess","then","readUrls","urls","done","forEach","prefix","inline","match","exec","filter","urlValue","dataUrl","RegExp","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","Object","getPrototypeOf","hasOwnProperty","bind","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","images","inlineCSSProperty","newImage","childNodes","child","properties","inliningTasks","propertyName","priority","getPropertyPriority","inlinedValue","setProperty","element","defaultOptions","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","data","toCanvas","exports","module","ownerWindow","copyOptions","clonee","cloneNode","root","parentComputedStyles","makeNodeCopy","clone","cloneChildren","processClone","original","children","cloneChildrenInOrder","parent","childs","computedStyles","childClone","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyFont","source","target","font","fontFamily","fontFeatureSettings","fontKerning","fontSize","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariationSettings","fontWeight","copyStyle","sourceElement","targetElement","sourceComputedStyles","copyUserComputedStyleFast","removeProperty","prop","cloneClassName","clonePseudoElement","content","currentClass","getAttribute","styleElement","setAttribute","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","styleText","formatProperty","name","propertyValue","propertyPriority","innerHTML","attribute","embedFonts","inlineImages","bgcolor","backgroundColor","keys","property","onCloneResult","onclone","svg","XMLSerializer","serializeToString","xhtml","foreignObject","domNode","scale","ctx","fillStyle","fillRect","mozImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","drawImage","sandbox","removeChild","removeDefaultStylesTimeoutId","clearTimeout","tagNameDefaultStyles","styleNode","defaultStyle","tagName","charset","visibility","position","characterSet","contentDocument","title","defaultElement","defaultComputedStyle","contentWindow","textContent","targetStyle","needs_prefixing","sourceValue","indexOf","this"],"mappings":"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"}