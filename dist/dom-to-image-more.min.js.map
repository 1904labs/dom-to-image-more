{"version":3,"file":"dom-to-image-more.min.js","sources":["../src/dom-to-image-more.js"],"names":["global","util","let","uid_index","escape","string","replace","parseExtension","mimeType","url","extension","toLowerCase","WOFF","JPEG","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","dataAsUrl","content","type","isDataUrl","search","canvasToBlob","canvas","toBlob","Promise","resolve","binaryString","atob","toDataURL","split","length","binaryArray","Uint8Array","i","charCodeAt","Blob","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","a","head","appendChild","body","href","getAndEncode","cacheEntry","domtoimage","impl","urlCache","find","el","promise","push","options","cacheBust","test","Date","getTime","httpTimeout","request","XMLHttpRequest","onreadystatechange","readyState","status","placeholder","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","useCredentials","withCredentials","open","send","message","console","error","imagePlaceholder","uid","Math","random","pow","toString","slice","delay","ms","arg","setTimeout","asArray","arrayLike","array","escapeXhtml","makeImage","uri","reject","image","Image","crossOrigin","onload","onerror","src","width","node","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","getWindow","isElement","value","Element","isHTMLElement","HTMLElement","isHTMLCanvasElement","HTMLCanvasElement","isHTMLInputElement","HTMLInputElement","isHTMLImageElement","HTMLImageElement","isHTMLTextAreaElement","HTMLTextAreaElement","isSVGElement","SVGElement","isSVGRectElement","SVGRectElement","ownerDocument","undefined","defaultView","ownerWindow","match","exec","styleProperty","getComputedStyle","getPropertyValue","parseFloat","inliner","URL_REGEX","inlineAll","get","shouldProcess","then","readUrls","urls","done","forEach","prefix","inline","filter","urlValue","data","dataUrl","RegExp","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","Object","getPrototypeOf","hasOwnProperty","bind","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","images","inlineCSSProperty","newImage","childNodes","child","properties","inliningTasks","propertyName","priority","getPropertyPriority","inlinedValue","setProperty","element","defaultOptions","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","toCanvas","exports","module","window","copyOptions","clonee","cloneNode","root","parentComputedStyles","makeNodeCopy","clone","cloneChildren","processClone","original","children","cloneChildrenInOrder","parent","childs","computedStyles","childClone","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyFont","source","target","font","fontFamily","fontFeatureSettings","fontKerning","fontSize","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariationSettings","fontWeight","copyStyle","sourceElement","targetElement","sourceComputedStyles","copyUserComputedStyleFast","removeProperty","prop","cloneClassName","clonePseudoElement","currentClass","getAttribute","styleElement","setAttribute","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","styleText","formatProperty","name","propertyValue","propertyPriority","innerHTML","attribute","embedFonts","inlineImages","bgcolor","backgroundColor","keys","property","onCloneResult","onclone","XMLSerializer","serializeToString","xhtml","foreignObject","domNode","scale","ctx","fillStyle","fillRect","mozImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","drawImage","sandbox","removeChild","removeDefaultStylesTimeoutId","clearTimeout","tagNameDefaultStyles","styleNode","defaultStyle","tagName","visibility","position","contentWindow","write","defaultElement","defaultComputedStyle","textContent","targetStyle","needs_prefixing","sourceValue","indexOf","this"],"mappings":"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"}