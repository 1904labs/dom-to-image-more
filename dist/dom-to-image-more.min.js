/*! dom-to-image-more 14-12-2022 */
!function(e){"use strict";const f=function(){let e=0;return{escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:n,mimeType:function(e){e=n(e).toLowerCase();return function(){var e="application/font-woff",t="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:t,jpeg:t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[e]||""},dataAsUrl:function(e,t){return`data:${t};base64,`+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(t){if(t.toBlob)return new Promise(function(e){t.toBlob(e)});return function(o){return new Promise(function(e){var t=s(o.toDataURL().split(",")[1]),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);e(new Blob([r],{type:"image/png"}))})}(t)},resolveUrl:function(e,t){var n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=(n.head.appendChild(r),n.createElement("a"));return n.body.appendChild(o),r.href=t,o.href=e,o.href},getAndEncode:function(u){let e=a.impl.urlCache.find(function(e){return e.url===u});e||(e={url:u,promise:null},a.impl.urlCache.push(e));null===e.promise&&(a.impl.options.cacheBust&&(u+=(/\?/.test(u)?"&":"?")+(new Date).getTime()),e.promise=new Promise(function(n){const e=a.impl.options.httpTimeout,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200!==r.status)o?n(o):i(`cannot fetch resource: ${u}, status: `+r.status);else{const t=new FileReader;t.onloadend=function(){var e=t.result.split(/,/)[1];n(e)},t.readAsDataURL(r.response)}},r.ontimeout=function(){o?n(o):i(`timeout of ${e}ms occured while fetching resource: `+u)},r.responseType="blob",r.timeout=e,a.impl.options.useCredentials&&(r.withCredentials=!0),r.open("GET",u,!0),r.send();let o;var t;function i(e){console.error(e),n("")}a.impl.options.imagePlaceholder&&(t=a.impl.options.imagePlaceholder.split(/,/))&&t[1]&&(o=t[1])}));return e.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++},delay:function(n){return function(t){return new Promise(function(e){setTimeout(function(){e(t)},n)})}},asArray:function(t){var n=[],r=t.length;for(let e=0;e<r;e++)n.push(t[e]);return n},escapeXhtml:function(e){return e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(r){return"data:,"!==r?new Promise(function(e,t){const n=new Image;a.impl.options.useCredentials&&(n.crossOrigin="use-credentials"),n.onload=function(){e(n)},n.onerror=t,n.src=r}):Promise.resolve()},width:function(e){var t=r(e,"border-left-width"),n=r(e,"border-right-width");return e.scrollWidth+t+n},height:function(e){var t=r(e,"border-top-width"),n=r(e,"border-bottom-width");return e.scrollHeight+t+n},getWindow:t,isElement:function(e){return e instanceof t(e).Element},isHTMLElement:function(e){return e instanceof t(e).HTMLElement},isHTMLCanvasElement:function(e){return e instanceof t(e).HTMLCanvasElement},isHTMLInputElement:function(e){return e instanceof t(e).HTMLInputElement},isHTMLImageElement:function(e){return e instanceof t(e).HTMLImageElement},isHTMLTextAreaElement:function(e){return e instanceof t(e).HTMLTextAreaElement},isSVGElement:function(e){return e instanceof t(e).SVGElement},isSVGRectElement:function(e){return e instanceof t(e).SVGRectElement}};function t(e){e=e?e.ownerDocument:void 0;return(e?e.defaultView:void 0)||ownerWindow}function n(e){e=/\.([^\.\/]*?)(\?|$)/g.exec(e);return e?e[1]:""}function r(e,t){e=h(e).getPropertyValue(t);return parseFloat(e.replace("px",""))}}(),o=function(){const r=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,r,o){if(!e(t))return Promise.resolve(t);return Promise.resolve(t).then(n).then(function(e){let n=Promise.resolve(t);return e.forEach(function(t){n=n.then(function(e){return i(e,t,r,o)})}),n})},shouldProcess:e,impl:{readUrls:n,inline:i}};function e(e){return-1!==e.search(r)}function n(e){for(var t,n=[];null!==(t=r.exec(e));)n.push(t[1]);return n.filter(function(e){return!f.isDataUrl(e)})}function i(n,r,t,e){return Promise.resolve(r).then(function(e){return t?f.resolveUrl(e,t):e}).then(e||f.getAndEncode).then(function(e){return f.dataAsUrl(e,f.mimeType(r))}).then(function(e){return n.replace((t=r,new RegExp(`(url\\(['"]?)(${f.escape(t)})(['"]?\\))`,"g")),`$1${e}$3`);var t})}}(),t={resolveAll:function(){return n().then(function(e){return Promise.all(e.map(function(e){return e.resolve()}))}).then(function(e){return e.join("\n")})},impl:{readAll:n}};function n(){return Promise.resolve(f.asArray(document.styleSheets)).then(function(e){const n=[];return e.forEach(function(t){if(Object.getPrototypeOf(t).hasOwnProperty("cssRules"))try{f.asArray(t.cssRules||[]).forEach(n.push.bind(n))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),n}).then(function(e){return e.filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).filter(function(e){return o.shouldProcess(e.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return o.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}const r={inlineAll:function t(e){if(!f.isElement(e))return Promise.resolve(e);return n(e).then(function(){return f.isHTMLImageElement(e)?i(e).inline():Promise.all(f.asArray(e.childNodes).map(function(e){return t(e)}))});function n(r){const e=["background","background-image"],t=e.map(function(t){const e=r.style.getPropertyValue(t),n=r.style.getPropertyPriority(t);return e?o.inlineAll(e).then(function(e){r.style.setProperty(t,e,n)}):Promise.resolve()});return Promise.all(t).then(function(){return r})}},impl:{newImage:i}};function i(n){return{inline:function(e){if(f.isDataUrl(n.src))return Promise.resolve();return Promise.resolve(n.src).then(e||f.getAndEncode).then(function(e){return f.dataAsUrl(e,f.mimeType(n.src))}).then(function(t){return new Promise(function(e){n.onload=e,n.onerror=e,n.src=t})})}}}const u={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,httpTimeout:3e4},a={toSvg:l,toPng:function(e,t){return(t=t||{}).raster=!0,c(e,t).then(function(e){return e.toDataURL()})},toJpeg:function(e,t){return(t=t||{}).raster=!0,c(e,t).then(function(e){return e.toDataURL("image/jpeg",t.quality||1)})},toBlob:function(e,t){return(t=t||{}).raster=!0,c(e,t).then(f.canvasToBlob)},toPixelData:function(t,e){return(e=e||{}).raster=!0,c(t,e).then(function(e){return e.getContext("2d").getImageData(0,0,f.width(t),f.height(t)).data})},toCanvas:function(e,t){return(t=t||{}).raster=!0,c(e,t||{})},impl:{fontFaces:t,images:r,util:f,inliner:o,urlCache:[],options:{}}},h=("object"==typeof exports&&"object"==typeof module?module.exports=a:e.domtoimage=a,e.getComputedStyle||window.getComputedStyle),s=e.atob||window.atob;function l(r,o){const t=a.impl.util.getWindow(r);var e=o=o||{};return void 0===e.imagePlaceholder?a.impl.options.imagePlaceholder=u.imagePlaceholder:a.impl.options.imagePlaceholder=e.imagePlaceholder,void 0===e.cacheBust?a.impl.options.cacheBust=u.cacheBust:a.impl.options.cacheBust=e.cacheBust,void 0===e.useCredentials?a.impl.options.useCredentials=u.useCredentials:a.impl.options.useCredentials=e.useCredentials,void 0===e.httpTimeout?a.impl.options.httpTimeout=u.httpTimeout:a.impl.options.httpTimeout=e.httpTimeout,Promise.resolve(r).then(function(e){return function i(t,u,a,s,c,l){if(!a&&u&&!u(t))return Promise.resolve();return Promise.resolve(t).then(e).then(function(e){return n(t,e)}).then(function(e){return r(t,e,s)});function e(e){return f.isHTMLCanvasElement(e)?f.makeImage(e.toDataURL()):e.cloneNode(!1)}function n(o,e){const t=o.childNodes;return 0===t.length?Promise.resolve(e):n(e,f.asArray(t)).then(function(){return e});function n(t,e){const n=h(o);let r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return i(e,u,!1,s,n,l)}).then(function(e){e&&t.appendChild(e)})}),r}}function r(s,l,o){return f.isElement(l)?Promise.resolve().then(e).then(t).then(n).then(r).then(function(){return l}):l;function e(){function r(e,t){t.font=e.font,t.fontFamily=e.fontFamily,t.fontFeatureSettings=e.fontFeatureSettings,t.fontKerning=e.fontKerning,t.fontSize=e.fontSize,t.fontStretch=e.fontStretch,t.fontStyle=e.fontStyle,t.fontVariant=e.fontVariant,t.fontVariantCaps=e.fontVariantCaps,t.fontVariantEastAsian=e.fontVariantEastAsian,t.fontVariantLigatures=e.fontVariantLigatures,t.fontVariantNumeric=e.fontVariantNumeric,t.fontVariationSettings=e.fontVariationSettings,t.fontWeight=e.fontWeight}function e(e,t){const n=h(e);n.cssText?(t.style.cssText=n.cssText,r(n,t.style)):(o?g(e,n,t,a):y(n,c,t),a&&(["inset-block","inset-block-start","inset-block-end"].forEach(e=>t.style.removeProperty(e)),["left","right","top","bottom"].forEach(e=>{t.style.getPropertyValue(e)&&t.style.setProperty(e,"0px")})))}e(s,l)}function t(){const a=f.uid();function t(o){const i=h(s,o),u=i.getPropertyValue("content");if(""!==u&&"none"!==u){const t=l.getAttribute("class")||"",n=(l.setAttribute("class",t+" "+a),document.createElement("style"));function e(){const e=`.${a}:`+o,t=(i.cssText?n:r)();return document.createTextNode(e+`{${t}}`);function n(){return`${i.cssText} content: ${u};`}function r(){const e=f.asArray(i).map(t).join("; ");return e+";";function t(e){const t=i.getPropertyValue(e),n=i.getPropertyPriority(e)?" !important":"";return e+": "+t+n}}}n.appendChild(e()),l.appendChild(n)}}[":before",":after"].forEach(function(e){t(e)})}function n(){f.isHTMLTextAreaElement(s)&&(l.innerHTML=s.value),f.isHTMLInputElement(s)&&l.setAttribute("value",s.value)}function r(){f.isSVGElement(l)&&(l.setAttribute("xmlns","http://www.w3.org/2000/svg"),f.isSVGRectElement(l))&&["width","height"].forEach(function(e){const t=l.getAttribute(e);t&&l.style.setProperty(e,t)})}}}(e,o.filter,!0,!o.raster,null,t)}).then(m).then(p).then(function(t){o.bgcolor&&(t.style.backgroundColor=o.bgcolor);o.width&&(t.style.width=o.width+"px");o.height&&(t.style.height=o.height+"px");o.style&&Object.keys(o.style).forEach(function(e){t.style[e]=o.style[e]});let e=null;"function"==typeof o.onclone&&(e=o.onclone(t));return Promise.resolve(e).then(function(){return t})}).then(function(e){return e=e,t=o.width||f.width(r),n=o.height||f.height(r),Promise.resolve(e).then(function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)}).then(f.escapeXhtml).then(function(e){return`<foreignObject x="0" y="0" width="100%" height="100%">${e}</foreignObject>`}).then(function(e){return`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${n}">${e}</svg>`}).then(function(e){return"data:image/svg+xml;charset=utf-8,"+e});var t,n}).then(function(e){return a.impl.urlCache=[],e})}function c(o,i){return l(o,i).then(f.makeImage).then(f.delay(0)).then(function(e){var t="number"!=typeof i.scale?1:i.scale,n=function(e,t){var n=document.createElement("canvas");n.width=(i.width||f.width(e))*t,n.height=(i.height||f.height(e))*t,i.bgcolor&&((e=n.getContext("2d")).fillStyle=i.bgcolor,e.fillRect(0,0,n.width,n.height));return n}(o,t),r=n.getContext("2d");return r.mozImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1,e&&(r.scale(t,t),r.drawImage(e,0,0)),w&&(document.body.removeChild(w),w=null,v&&clearTimeout(v),v=setTimeout(()=>{v=null,P={}},2e4)),n})}function m(n){return t.resolveAll().then(function(e){var t;return""!==e&&(t=document.createElement("style"),n.appendChild(t),t.appendChild(document.createTextNode(e))),n})}function p(e){return r.inlineAll(e).then(function(){return e})}function d(e,t,n,r){var o=0<=["background-clip"].indexOf(t);r?(e.setProperty(t,n,r),o&&e.setProperty("-webkit-"+t,n,r)):(e.setProperty(t,n),o&&e.setProperty("-webkit-"+t,n))}function g(e,t,n,r){var o,i=n.style,u=e.style;for(o of t){var a=t.getPropertyValue(o),s=u.getPropertyValue(o),l=(u.setProperty(o,r?"initial":"unset"),t.getPropertyValue(o));l!==a?d(i,o,a,void 0):i.removeProperty(o),d(u,o,s)}}function y(r,o,e){const i=function(e){if(P[e])return P[e];w||((w=document.createElement("iframe")).style.visibility="hidden",w.style.position="fixed",document.body.appendChild(w),w.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const t=document.createElement(e),n=(w.contentWindow.document.body.appendChild(t),t.textContent=".",w.contentWindow.getComputedStyle(t)),r={};return f.asArray(n).forEach(function(e){r[e]="width"===e||"height"===e?"auto":n.getPropertyValue(e)}),w.contentWindow.document.body.removeChild(t),P[e]=r}(e.tagName),u=e.style;f.asArray(r).forEach(function(e){var t,n=r.getPropertyValue(e);(n!==i[e]||o&&n!==o.getPropertyValue(e))&&(t=r.getPropertyPriority(e),d(u,e,n,t))})}let v=null,w=null,P={}}(this);
//# sourceMappingURL=dom-to-image-more.min.js.map